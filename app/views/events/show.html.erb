<div class="card m-3">
  <div class="card-body">
    <div class="media">
      <%= image_tag @event.image_file_name, class: "align-self-start mr-5", style: "width: 500px" %>
      <div class="media-body">
        <h1><%= @event.name %></h1>
        <p class="font-weight-bold d-inline-block mt-4"><%= day_and_time(@event) %> in <%= @event.location %></p>
        <p class="badge badge-light ml-1 border border-primary"><%= pluralize(@event.capacity, "spot") %> &bull; <%= price(@event) %></p>
        <p><%= @event.description %></p>
        <div class="mb-3">
          <%= register_or_sold_out(@event) %>
        </div>
        <p><%= link_to "Who's registered?", event_registrations_path(@event) %></p>
        <% if current_user %>
          <div class="list-group list-group-horizontal">
            <%= like_or_unlike_button(@event, @like) %>
            <div class="list-group-item text-secondary">
              <%= @likers.size %>
            </div>
          </div>
        <% end %>
        <% if current_user_admin? %>
          <div class="mt-3">
            <%= link_to "Edit", edit_event_path(@event), class: "btn btn-warning px-4" %>
            <%= link_to "Delete", @event, class: "btn btn-danger px-4", method: :delete, 
                                  data: { confirm: "Really?" } %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<% if @likers.present? %>
<div class="card m-3">
  <div class="card-body">
    <h4>Liked by</h4>
    <ul>
      <% @likers.each do |user| %>
        <li>
          <%= link_to user.name, user %>
        </li>
      <% end %>
    </ul>
    <% end %>
  </div>
</div>

<% if @categories.present? %>
<div class="card m-3">
  <div class="card-body">
      <h4>Categories</h4>
      <ul>
        <% @categories.each do |c| %>
          <li>
            <%= c.name %>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
